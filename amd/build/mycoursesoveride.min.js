define ("local_boostnavigation/mycoursesoveride",["jquery","core/templates"],function(a,b){"use strict";function c(b){b.click(function(a){a.preventDefault();if(0==b.attr("data-collapse")){d(b)}else if(1==b.attr("data-collapse")){e(b)}});a(".list-group-item[data-key=\"mycourses\"]").click(function(){d(b)})}function d(b){a(".list-group-item[data-past=\"true\"]").attr("data-hidden","1");b.attr("data-collapse","1");b.attr("aria-expanded","0");b.find(".fa-caret-down").addClass("fa-caret-right");b.find(".fa-caret-right").removeClass("fa-caret-down")}function e(b){a(".list-group-item[data-past=\"true\"]").attr("data-hidden","0");b.attr("data-collapse","0");b.attr("aria-expanded","1");b.find(".fa-caret-right").addClass("fa-caret-down");b.find(".fa-caret-down").removeClass("fa-caret-right")}function f(b){var c="";a(".list-group-item[data-past=\"true\"]").each(function(b,d){var e=a(d).attr("data-key");if("localboost"!==e.substring(0,10)){e="localboostnavigation"+e}a(d).attr("id",e);c=c+e+" "});if(""!=c){b.attr("aria-controls",c.trim())}if(0==b.attr("data-collapse")){b.attr("aria-expanded","1")}else if(1==b.attr("data-collapse")){b.attr("aria-expanded","0")}}function g(a){a.attr("tabindex","0");a.keydown(function(a){if(13===a.which){a.currentTarget.click()}});a.mousedown(function(){a.css("outline","none")});a.mouseup(function(){a.css("outline","");a.blur()})}function h(b){var d=a(".list-group-item[data-key=\""+b+"\"]");c(d,b);f(d,b);g(d)}function i(a,c,d){return a.sort(function(e,a){if(e[c]==a[c]){var b=e[d],f=a[d];return b>f?-1:b<f?1:0}else{var b=e[c],f=a[c];return b>f?-1:b<f?1:0}})}function i(a,c){return a.sort(function(d,a){var b=d[c],e=a[c];return b>e?-1:b<e?1:0})}function j(a,c){b.render("local_boostnavigation/mycoursesoveride",{key:"mycoursesongoing",parent_key:"mycourses",text:"Ongoing courses",ongoing:!0,header:!0,get_indent:0}).then(function(b){a.after(b);k(c)})}function k(b){for(var c=a(".list-group-item[data-key=\"mycoursesongoing\"]"),d=0;d<b.length;d++){b[d].get_indent=0;o(c[0],b[d])}}function l(c,d,e){var f={};f.key="mycoursespast";f.isexpandable=1;f.get_indent=1;f.showdivider=0;f.type=0;f.nodetype=1;f.collapse=1;f.forceopen=1;f.isactive=0;f.hidden=0;f.preceedwithhr=0;f.parent="mycourses";f.text="Past courses";f.icon=[{pix:"i/moremenu",alt:"",component:"moodle"}];b.render("local_boostnavigation/mycoursesoveride",f).then(function(b){c.after(b);var f=a(".list-group-item[data-key=\"mycoursespast\"]");console.log("NODES0");console.log(d);p(e,f,!0).then(function(){console.log("NODES0c");console.log(d);m(d)})})}function m(b){var c="";console.log("NODES");console.log(b);for(var d=0;d<b.length;d++){b[d].get_indent=1;b[d].past=!0;b[d].hidden=1;if(c!=b[d].term){c=b[d].term}for(var e=a(".list-group-item[data-key=\""+c+"\"]"),f=0,g;f<e.length;f++){g=a(e[f]).attr("data-past");if("true"==g||!0==g){var k=e[f]}}console.log(k);o(k,b[d])}a.when.apply(a,b).done(function(){h("mycoursespast")})}function n(b){for(var c="",d=0;d<b.length;d++){if(c!=b[d].term){c=b[d].term}for(var e=a(".list-group-item[data-key=\""+c+"\"]"),f=0,g;f<e.length;f++){g=a(e[f]).attr("data-past");if("false"==g){var h=e[f]}}o(h,b[d])}}function o(c,d){b.render("local_boostnavigation/mycoursesoveride",d).then(function(b){a(c).after(b)})}function p(c,d,e){console.log("Test1");console.log("Test2");console.log(c);var f=[];c.forEach(function(a){var c={header:"true",text:a,parent_key:"mycourses",get_indent:1};console.log("test2b");console.log(a);var g=a.split(" ");if("Spring/Summer"==g[0]){c.Spring="true"}else{c[g[0]]="true"}if(e){c.past="true";c.hidden=1;c.get_indent=2}f.push(function(){return b.render("local_boostnavigation/mycoursesoveride",c).then(function(a){d.after(a)}).promise()})});console.log("Test3");return a.when(function all(b){var c=a.Deferred(),d=0,e=b.length,f=[];if(0===e){c.resolve(f)}else{b.forEach(function(b,g){a.when(b()).then(function(a){f[g]=a;d++;if(d===e){c.resolve(f)}})})}return c.promise()}(f)).then(function(a){return a})}return{init:function init(b,c,d,e,f){var g=a(".list-group-item[data-parent-key=\"mycourses\"]");g.remove();var h=a(".list-group-item[data-key=\"mycourses\"]");console.log("NODES0");console.log(d);if(0<d.length){l(h,i(d,"term","text"),e)}p(c,h,!1).then(function(){n(i(b,"term","text"))});if(0<f.length){j(h,i(f,"text"))}}}});
//# sourceMappingURL=mycoursesoveride.min.js.map
